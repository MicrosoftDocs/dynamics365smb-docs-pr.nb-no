---
title: Rydde data med oppbevaringspolicyer | Microsoft Docs
description: Du kan angi hvor ofte du vil slette visse typer data.
author: bholtorf
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: delete, data, retention, policy, policies
ms.date: 04/01/2021
ms.author: bholtorf
ms.openlocfilehash: e9d8f9fc9b74df561aab3109b631fc10c7f46108
ms.sourcegitcommit: 766e2840fd16efb901d211d7fa64d96766ac99d9
ms.translationtype: HT
ms.contentlocale: nb-NO
ms.lasthandoff: 03/31/2021
ms.locfileid: "5780060"
---
# <a name="define-retention-policies"></a><span data-ttu-id="9aa64-103">Definere oppbevaringspolicyer</span><span class="sxs-lookup"><span data-stu-id="9aa64-103">Define Retention Policies</span></span>
<span data-ttu-id="9aa64-104">Administratorer kan definere oppbevaringspolicyer for å angi hvor ofte de vil at [!INCLUDE[prod_short](includes/prod_short.md)] skal slette foreldede data i tabeller som inneholder loggoppføringer og arkiverte poster.</span><span class="sxs-lookup"><span data-stu-id="9aa64-104">Administrators can define retention policies to specify how frequently they want [!INCLUDE[prod_short](includes/prod_short.md)] to delete outdated data in tables that contain log entries and archived records.</span></span> <span data-ttu-id="9aa64-105">Hvis loggposter ryddes, kan det for eksempel bli enklere å arbeide med dataene som faktisk er relevante.</span><span class="sxs-lookup"><span data-stu-id="9aa64-105">For example, cleaning up log entries can make it easier to work with the data that's actually relevant.</span></span> <span data-ttu-id="9aa64-106">Policyer kan omfatte alle data i tabellene som har passert utløpsdatoen, eller du kan legge til filterkriterier som bare inkluderer bestemte utgåtte data i policyen.</span><span class="sxs-lookup"><span data-stu-id="9aa64-106">Policies can include all data in the tables that is past the expiration date, or you can add filter criteria that will include only certain expired data in the policy.</span></span> 

## <a name="required-setups-and-permissions"></a><span data-ttu-id="9aa64-107">Nødvendige konfigurasjoner og tillatelser</span><span class="sxs-lookup"><span data-stu-id="9aa64-107">Required Setups and Permissions</span></span>
<span data-ttu-id="9aa64-108">Før du kan opprette oppbevaringspolicyer må du definere følgende.</span><span class="sxs-lookup"><span data-stu-id="9aa64-108">Before you can create retention policies, you must set up the following.</span></span>

|<span data-ttu-id="9aa64-109">Oppsett</span><span class="sxs-lookup"><span data-stu-id="9aa64-109">Setup</span></span>  |<span data-ttu-id="9aa64-110">Beskrivelse</span><span class="sxs-lookup"><span data-stu-id="9aa64-110">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="9aa64-111">**Tillatte tabeller**</span><span class="sxs-lookup"><span data-stu-id="9aa64-111">**Allowed Tables**</span></span>     |<span data-ttu-id="9aa64-112">Vi gir en liste over tabellene som kan inkluderes i oppbevaringspolicyer.</span><span class="sxs-lookup"><span data-stu-id="9aa64-112">We provide a list of the tables that can be included in retention policies.</span></span> <span data-ttu-id="9aa64-113">Hvis du vil legge til tabeller fra en utvidelse til en oppbevaringspolicy, må imidlertid en utvikler legge til tabellene i listen.</span><span class="sxs-lookup"><span data-stu-id="9aa64-113">However, if you want to add tables from an extension to a retention policy a developer must add their tables to the list.</span></span> <span data-ttu-id="9aa64-114">Hvis du vil ha mer informasjon, kan du se [Inkludere utvidelsen i en oppbevaringspolicy](admin-data-retention-policies.md#including-your-extension-in-a-retention-policy-requires-help-from-a-developer).</span><span class="sxs-lookup"><span data-stu-id="9aa64-114">For more information, see [Including Your Extension in a Retention Policy](admin-data-retention-policies.md#including-your-extension-in-a-retention-policy-requires-help-from-a-developer).</span></span>          |
|<span data-ttu-id="9aa64-115">**Oppbevaringsperioder**</span><span class="sxs-lookup"><span data-stu-id="9aa64-115">**Retention Periods**</span></span>     |<span data-ttu-id="9aa64-116">Angi tidsperioder det skal beholdes data i tabellene, i en policy.</span><span class="sxs-lookup"><span data-stu-id="9aa64-116">Specify periods of time for which to keep data in the tables in a policy.</span></span> <span data-ttu-id="9aa64-117">Periodene bestemmer hvor ofte data skal slettes.</span><span class="sxs-lookup"><span data-stu-id="9aa64-117">The periods determine how often data will be deleted.</span></span>         |

<span data-ttu-id="9aa64-118">I tillegg må du ha SUPER-brukertillatelsene eller tillatelsessettet Oppbevaringspolicyoppsett.</span><span class="sxs-lookup"><span data-stu-id="9aa64-118">Additionally, you must have the SUPER user permissions or the Retention Policy Setup permission set.</span></span> <span data-ttu-id="9aa64-119">Brukere som har tillatelsessettet Oppbevaringspolicyoppsett kan definere oppbevaringspolicyer for tabeller, selv om de ikke har lese- og slettetillatelser for disse tabellene.</span><span class="sxs-lookup"><span data-stu-id="9aa64-119">Users who are granted the Retention Policy Setup permission set can define retention policies for tables, even if they do not have Read and Delete permissions for those tables.</span></span> <span data-ttu-id="9aa64-120">Jobbkøoppføringen må kjøre som en bruker med tillatelser til å lese og slette dataene.</span><span class="sxs-lookup"><span data-stu-id="9aa64-120">The job queue entry must run as a user with permissions to read and delete the data.</span></span> <span data-ttu-id="9aa64-121">Vi anbefaler at du ikke gir tillatelsessettet Oppbevaringspolicyoppsett til brukere som ikke skal kunne slette data.</span><span class="sxs-lookup"><span data-stu-id="9aa64-121">We recommend that you do not grant the Retention Policy Setup permission set to users who should not be allowed to delete data.</span></span>

> [!NOTE]
> <span data-ttu-id="9aa64-122">Hvis du bruker [!INCLUDE[prod_short](includes/prod_short.md)] lokalt, og du vil prøve ut oppbevaringspolicyer i Cronus-demonstrasjonsdatabasen, er det noen ting du må gjøre.</span><span class="sxs-lookup"><span data-stu-id="9aa64-122">If you are using [!INCLUDE[prod_short](includes/prod_short.md)] on-premises, and you want to try out retention policies in the the Cronus demonstration database, there are a few things you need to do.</span></span> <span data-ttu-id="9aa64-123">Demonstrasjonsselskapet inneholder ikke tabeller som du kan bruke med oppbevaringspolicyer, så du må legge dem til.</span><span class="sxs-lookup"><span data-stu-id="9aa64-123">The demonstration company does not contain tables that you can use with retention policies, so you need to add them.</span></span> <span data-ttu-id="9aa64-124">Det gjør du ved å opprette et nytt, tomt selskap i demonstrasjonsdatabasen.</span><span class="sxs-lookup"><span data-stu-id="9aa64-124">To do that, create a new, blank company in the demonstration database.</span></span> <span data-ttu-id="9aa64-125">I det nye selskapet importerer du RapidStart-konfigurasjonspakken for landet ditt som tilsvarer standard NAV17.0.W1.ENU.STANDARD.rapidstart-pakken.</span><span class="sxs-lookup"><span data-stu-id="9aa64-125">In the new company, import the RapidStart configuration package for your country that corresponds to the standard NAV17.0.W1.ENU.STANDARD.rapidstart package.</span></span> <span data-ttu-id="9aa64-126">Oppsettsdataene for oppbevaringspolicyer vil være tilgjengelige i det nye selskapet.</span><span class="sxs-lookup"><span data-stu-id="9aa64-126">The setup data for retention policies will be available in the new company.</span></span>

### <a name="to-create-retention-periods"></a><span data-ttu-id="9aa64-127">Slik oppretter du oppbevaringsperioder</span><span class="sxs-lookup"><span data-stu-id="9aa64-127">To create retention periods</span></span>
<span data-ttu-id="9aa64-128">Oppbevaringsperioder kan være så lang eller så kort du vil.</span><span class="sxs-lookup"><span data-stu-id="9aa64-128">Retention periods can be as long or as short as you want.</span></span> <span data-ttu-id="9aa64-129">Hvis du vil opprette oppbevaringsperioder, bruker du handlingen **Oppbevaringsperiode** på siden **Oppbevaringspolicyer**.</span><span class="sxs-lookup"><span data-stu-id="9aa64-129">To create retention periods, on the **Retention Policies** page, use the **Retention Period** action.</span></span> <span data-ttu-id="9aa64-130">Periodene du definerer, vil være tilgjengelige for alle policyer.</span><span class="sxs-lookup"><span data-stu-id="9aa64-130">The periods you define will be available for all policies.</span></span>

> [!NOTE]
> <span data-ttu-id="9aa64-131">Av hensyn til samsvar har vi definert en minimums oppbevaringsperiode for noen tabeller.</span><span class="sxs-lookup"><span data-stu-id="9aa64-131">For compliance reasons, we have defined a minimum retention period for some tables.</span></span> <span data-ttu-id="9aa64-132">Hvis du angir en oppbevaringsperiode som er kortere enn minimumskravet, vises en melding med den obligatoriske perioden.</span><span class="sxs-lookup"><span data-stu-id="9aa64-132">If you set a retention period that is shorter than minimum required, a message will display the mandatory period.</span></span>

### <a name="set-up-a-retention-policy"></a><span data-ttu-id="9aa64-133">Definere en oppbevaringspolicy</span><span class="sxs-lookup"><span data-stu-id="9aa64-133">Set up a retention policy</span></span>
1. <span data-ttu-id="9aa64-134">Velg ikonet ![lyspære som åpner Fortell meg-funksjonen](media/ui-search/search_small.png "Fortell hva du vil gjøre"), angi **Oppbevaringspolicyer**, og velg den relaterte koblingen.</span><span class="sxs-lookup"><span data-stu-id="9aa64-134">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Retention Policies**, and choose the related link.</span></span>
2. <span data-ttu-id="9aa64-135">Velg tabellen du vil ta med i policyen, i **Tabell-ID**-feltet.</span><span class="sxs-lookup"><span data-stu-id="9aa64-135">In the **Table ID** field, choose the table that you want to include in the policy.</span></span>
3. <span data-ttu-id="9aa64-136">I feltet **Oppbevaringsperiode** angir du hvor lenge dataene i tabellen skal beholdes.</span><span class="sxs-lookup"><span data-stu-id="9aa64-136">In the **Retention Period** field, specify the length of time for which to keep the data in the table.</span></span>
4. <span data-ttu-id="9aa64-137">Valgfritt: Hvis du vil bruke policyen på bestemte data i en tabell, deaktiverer du Bruk på alle poster.</span><span class="sxs-lookup"><span data-stu-id="9aa64-137">Optional: To apply the policy to specific data in a table, turn off the Apply to all records toggle.</span></span> <span data-ttu-id="9aa64-138">Hurtigfanen Oppbevaringspolicy for post vises, der du kan definere filtre for å opprette delsett med data for hver linje.</span><span class="sxs-lookup"><span data-stu-id="9aa64-138">The Record Retention Policy FastTab will display, where you can set filters to create subsets of data for each line.</span></span> <span data-ttu-id="9aa64-139">Hvis du vil ha mer informasjon, kan du se [Filtrering](ui-enter-criteria-filters.md#filtering).</span><span class="sxs-lookup"><span data-stu-id="9aa64-139">For more information, see [Filtering](ui-enter-criteria-filters.md#filtering).</span></span>

   > [!NOTE]
   > <span data-ttu-id="9aa64-140">Hver linje har sin egen oppbevaringsperiode.</span><span class="sxs-lookup"><span data-stu-id="9aa64-140">Each line has its own retention period.</span></span> <span data-ttu-id="9aa64-141">Hvis du angir forskjellige oppbevaringsperioder for de samme dataene, brukes den lengste perioden.</span><span class="sxs-lookup"><span data-stu-id="9aa64-141">If you specify different retention periods for the same data, the longest period will be used.</span></span> <span data-ttu-id="9aa64-142">I tillegg inneholder noen tabeller filtre som du ikke kan endre eller fjerne.</span><span class="sxs-lookup"><span data-stu-id="9aa64-142">Also, some tables contain filters that you cannot change or remove.</span></span> <span data-ttu-id="9aa64-143">For å gjøre det lettere å identifisere disse filtrene, vises de i en lysere fargeskrift.</span><span class="sxs-lookup"><span data-stu-id="9aa64-143">To help you identify these filters, they appear in a lighter color font.</span></span>

## <a name="applying-retention-policies"></a><span data-ttu-id="9aa64-144">Bruke oppbevaringspolicyer</span><span class="sxs-lookup"><span data-stu-id="9aa64-144">Applying Retention Policies</span></span>
<span data-ttu-id="9aa64-145">Du kan bruke en jobbkøpost til å bruke oppbevaringspolicyer for å slette data automatisk, eller du kan bruke policyer manuelt.</span><span class="sxs-lookup"><span data-stu-id="9aa64-145">You can use a job queue entry to apply retention policies to delete data automatically, or you can manually apply policies.</span></span>

<span data-ttu-id="9aa64-146">Hvis du vil bruke en oppbevaringspolicy automatisk, oppretter og aktiverer du bare en policy.</span><span class="sxs-lookup"><span data-stu-id="9aa64-146">To apply a retention policy automatically, just create and enable a policy.</span></span> <span data-ttu-id="9aa64-147">Når du aktiverer en policy, opprettes det en jobbkøpost som bruker oppbevaringspolicyer i henhold til oppbevaringsperioden du angir.</span><span class="sxs-lookup"><span data-stu-id="9aa64-147">When you enable a policy we create a job queue entry that will apply retention policies according to the retention period you specify.</span></span> <span data-ttu-id="9aa64-148">Alle oppbevaringspolicyer vil bruke samme jobbkøpost.</span><span class="sxs-lookup"><span data-stu-id="9aa64-148">All retention policies will use the same job queue entry.</span></span> <span data-ttu-id="9aa64-149">Som standard bruker jobbkøposten policyen hver dag klokken 0200.</span><span class="sxs-lookup"><span data-stu-id="9aa64-149">By default, the job queue entry applies the policy every day at 0200.</span></span> <span data-ttu-id="9aa64-150">Du kan endre standarden, men hvis du gjør det, anbefaler vi at den kjøres utenfor arbeidstiden.</span><span class="sxs-lookup"><span data-stu-id="9aa64-150">You can change the default, but if you do we recommend that it runs outside business hours.</span></span> <span data-ttu-id="9aa64-151">Hvis du vil ha mer informasjon, kan du se [Bruke jobbkøer til å planlegge oppgaver](admin-job-queues-schedule-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="9aa64-151">For more information, see [Use Job Queues to Schedule Tasks](admin-job-queues-schedule-tasks.md).</span></span> 

<span data-ttu-id="9aa64-152">Du kan bruke en policy manuelt ved hjelp av handlingen **Bruk manuelt** på siden **Oppbevaringspolicyer**.</span><span class="sxs-lookup"><span data-stu-id="9aa64-152">You can manually apply a policy by using the **Apply Manually** action on the **Retention Policies** page.</span></span> <span data-ttu-id="9aa64-153">Hvis du alltid vil bruke en policy manuelt, slår du på **Manuell**.</span><span class="sxs-lookup"><span data-stu-id="9aa64-153">If you want to always apply a policy manually, turn on the **Manual** toggle.</span></span> <span data-ttu-id="9aa64-154">Jobbkøposten vil ikke ta hensyn til policyen når den kjøres.</span><span class="sxs-lookup"><span data-stu-id="9aa64-154">The job queue entry will disregard the policy when it runs.</span></span>

## <a name="viewing-retention-policy-log-entries"></a><span data-ttu-id="9aa64-155">Vise loggoppføringer for oppbevaringspolicy</span><span class="sxs-lookup"><span data-stu-id="9aa64-155">Viewing Retention Policy Log Entries</span></span>
<span data-ttu-id="9aa64-156">Du kan vise aktivitet som er knyttet til oppbevaringspolicyer, på siden **Oppbevaringspolicylogg**.</span><span class="sxs-lookup"><span data-stu-id="9aa64-156">You can view activity related to retention policies in the **Retention Policy Log** page.</span></span> <span data-ttu-id="9aa64-157">Det opprettes for eksempel poster når en policy brukes, eller hvis det oppstod feil når det skjedde.</span><span class="sxs-lookup"><span data-stu-id="9aa64-157">For example, entries are created when when a policy is applied, or if errors occurred when that happened.</span></span> 

## <a name="including-your-extension-in-a-retention-policy-requires-help-from-a-developer"></a><span data-ttu-id="9aa64-158">Inkludere utvidelsen i en oppbevaringspolicy (krever hjelp fra en utvikler)</span><span class="sxs-lookup"><span data-stu-id="9aa64-158">Including Your Extension in a Retention Policy (Requires Help from a Developer)</span></span>
<span data-ttu-id="9aa64-159">Oppbevaringspolicyer dekker som standard bare tabeller som er inkludert i listen over [!INCLUDE[prod_short](includes/prod_short.md)]-tabeller som vi tilbyr.</span><span class="sxs-lookup"><span data-stu-id="9aa64-159">By default, retention policies cover only tables that are included in the list of [!INCLUDE[prod_short](includes/prod_short.md)] tables that we provide.</span></span> <span data-ttu-id="9aa64-160">Du kan fjerne standardtabeller fra listen, og du kan legge til tabeller som du eier.</span><span class="sxs-lookup"><span data-stu-id="9aa64-160">You can remove default tables from the list, and you can add tables that you own.</span></span> <span data-ttu-id="9aa64-161">Det vil si at du ikke kan legge til en tabell du ikke har opprettet selv.</span><span class="sxs-lookup"><span data-stu-id="9aa64-161">That is, you cannot add a table that you did not create yourself.</span></span> <span data-ttu-id="9aa64-162">Du kan for eksempel ikke legge til andre tabeller fra [!INCLUDE[prod_short](includes/prod_short.md)] eller fra en utvidelse du har kjøpt.</span><span class="sxs-lookup"><span data-stu-id="9aa64-162">For example, you cannot add other tables from [!INCLUDE[prod_short](includes/prod_short.md)] or from an extension that you have purchased.</span></span>

<span data-ttu-id="9aa64-163">For å legge til tabellene dine i listen over tillatte tabeller, må en utvikler legge til kode, for eksempel i installasjonsprogrammets codeunit for utvidelsen (en codeunit med undertypen *installasjon*).</span><span class="sxs-lookup"><span data-stu-id="9aa64-163">To add your tables to the list of allowed tables, a developer must add some code, for example to the installer codeunit for the extension (a codeunit with the *install* subtype).</span></span> 

<span data-ttu-id="9aa64-164">Når en utvikler legger til en tabell, kan de angi obligatoriske og standard filtre.</span><span class="sxs-lookup"><span data-stu-id="9aa64-164">When a developer adds a table, they can specify mandatory and default filters.</span></span> <span data-ttu-id="9aa64-165">Obligatoriske filtre kan ikke fjernes eller endres senere når du legger til tabeller for å definere en oppbevaringspolicy.</span><span class="sxs-lookup"><span data-stu-id="9aa64-165">Mandatory filters cannot be removed or modified later when you add tables to define a retention policy.</span></span> <span data-ttu-id="9aa64-166">Standardfiltre er bare brukervennlige forslag.</span><span class="sxs-lookup"><span data-stu-id="9aa64-166">Default filters are just friendly suggestions.</span></span>

<span data-ttu-id="9aa64-167">Følgende er eksempler på hvordan du legger til en tabell i listen over tillatte tabeller med, og uten, obligatoriske eller standard filtre.</span><span class="sxs-lookup"><span data-stu-id="9aa64-167">The following are examples of how to add a table to the list of allowed tables with, and without, mandatory or default filters.</span></span> <span data-ttu-id="9aa64-168">Hvis du vil ha et mer komplisert eksempel, se codeunit 3999 "Reten.</span><span class="sxs-lookup"><span data-stu-id="9aa64-168">For a more complex example, see codeunit 3999 "Reten.</span></span> <span data-ttu-id="9aa64-169">Pol.</span><span class="sxs-lookup"><span data-stu-id="9aa64-169">Pol.</span></span> <span data-ttu-id="9aa64-170">Install - BaseApp".</span><span class="sxs-lookup"><span data-stu-id="9aa64-170">Install - BaseApp".</span></span> 

```
 trigger OnInstallAppPerCompany()
    var
        RetenPolAllowedTables: Codeunit "Reten. Pol. Allowed Tables";
    begin
        RetenPolAllowedTables.AddAllowedTable(Database::"Retention Policy Log Entry");
    end;
```

<span data-ttu-id="9aa64-171">Følgende eksempel inneholder et obligatorisk filter.</span><span class="sxs-lookup"><span data-stu-id="9aa64-171">The following example includes a mandatory filter.</span></span>

```
 trigger OnInstallAppPerCompany()
    var
        ChangeLogEntry: Record "Change Log Entry";
        RetenPolAllowedTables: Codeunit "Reten. Pol. Allowed Tables";
        RetentionPeriod: Enum "Retention Period Enum";
        RecRef: RecordRef;
        TableFilters: JsonArray;
        Enabled: Boolean;
        Mandatory: Boolean;
    begin
        ChangeLogEntry.Reset();
        ChangeLogEntry.SetFilter("Field Log Entry Feature", '%1|%2', ChangeLogEntry."Field Log Entry Feature"::"Monitor Sensitive Fields", ChangeLogEntry."Field Log Entry Feature"::All);
        RecRef.GetTable(ChangeLogEntry);
        Enabled := true;
        Mandatory := true;
        RetenPolAllowedTables.AddTableFilterToJsonArray(TableFilters, RetentionPeriod::"28 Days", ChangeLogEntry.FieldNo(SystemCreatedAt), Enabled, Mandatory, RecRef);
        RetenPolAllowedTables.AddAllowedTable(Database::"Change Log Entry", ChangeLogEntry.FieldNo(SystemCreatedAt), TableFilters);
    end;
```
<span data-ttu-id="9aa64-172">Når en utvikler har lagt til tabeller i listen, kan en administrator inkludere dem i en oppbevaringspolicy.</span><span class="sxs-lookup"><span data-stu-id="9aa64-172">After a developer has added tables to the list, an administrator can include them in a retention policy.</span></span> 

## <a name="see-also"></a><span data-ttu-id="9aa64-173">Se også</span><span class="sxs-lookup"><span data-stu-id="9aa64-173">See Also</span></span>
[<span data-ttu-id="9aa64-174">Revidere endringer i Business Central</span><span class="sxs-lookup"><span data-stu-id="9aa64-174">Auditing Changes in Business Central</span></span>](across-log-changes.md)  
[<span data-ttu-id="9aa64-175">Filtrering</span><span class="sxs-lookup"><span data-stu-id="9aa64-175">Filtering</span></span>](ui-enter-criteria-filters.md#filtering)  
[<span data-ttu-id="9aa64-176">Bruke jobbkøer til å planlegge oppgaver</span><span class="sxs-lookup"><span data-stu-id="9aa64-176">Use Job Queues to Schedule Tasks</span></span>](admin-job-queues-schedule-tasks.md)  
<span data-ttu-id="9aa64-177">[Arbeide med [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)</span><span class="sxs-lookup"><span data-stu-id="9aa64-177">[Working with [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)</span></span>  

[!INCLUDE[footer-include](includes/footer-banner.md)]